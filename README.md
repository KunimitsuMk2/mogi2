
# ãƒ•ãƒªãƒã‚¢ãƒ—ãƒª

## âœ¨ ãƒ—ãƒ­å…¥ä¼šãƒ†ã‚¹ãƒˆ

#### 1\. å–å¼•ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã®å°å…¥

  * **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³**: å‡ºå“è€…ã¨è³¼å…¥è€…é–“ã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€å—ä¿¡æ©Ÿèƒ½ã‚’å®Ÿè£…ã€‚
  * **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç®¡ç†**: `TransactionMessage`ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä¿å­˜ã€å–å¾—ã€æ—¢èª­ç®¡ç†ã€‚
  * **ç”»åƒæ·»ä»˜**: ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ç”»åƒã‚’æ·»ä»˜ã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã€‚
  * **ç·¨é›†ãƒ»å‰Šé™¤æ©Ÿèƒ½**: æŠ•ç¨¿æ¸ˆã¿ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç·¨é›†ãŠã‚ˆã³å‰Šé™¤æ©Ÿèƒ½ã‚’è¿½åŠ ã€‚

#### 2\. ãƒ¦ãƒ¼ã‚¶ãƒ¼è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰
 
  * **å–å¼•å®Œäº†å¾Œã®è©•ä¾¡**: å–å¼•å®Œäº†å¾Œã«ã€è³¼å…¥è€…ãƒ»å‡ºå“è€…ãŒäº’ã„ã‚’è©•ä¾¡ã§ãã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã€‚
  * **è©•ä¾¡ã®è¨˜éŒ²**: `UserRating`ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ã¦ã€è©•ä¾¡ç‚¹ã¨ã‚³ãƒ¡ãƒ³ãƒˆã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¨˜éŒ²ã€‚
  * **å¹³å‡è©•ä¾¡ã®è¡¨ç¤º**: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¹³å‡è©•ä¾¡ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã€‚
  * **ãƒ¡ãƒ¼ãƒ«é€šçŸ¥**: å•†å“è³¼å…¥è€…ãŒå–å¼•ã‚’å®Œäº†ã—ãŸéš›ã«ã€å‡ºå“è€…ã¸é€šçŸ¥ãƒ¡ãƒ¼ãƒ«ã‚’è‡ªå‹•é€ä¿¡ã€‚ 

## âš ï¸ æœªå®Ÿè£…ãƒ»ä»•æ§˜å·®ç•°

ä»¥ä¸‹ã®è¦ä»¶ã«ã¤ã„ã¦ã¯æ™‚é–“ãŒé–“ã«åˆã‚ãšã€æœªå®Ÿè£…ã¾ãŸã¯ä»•æ§˜ãŒä¸€éƒ¨ç•°ãªã‚Šã¾ã™ã€‚(2025/07/15)

  * **FN010ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç·¨é›†æ©Ÿèƒ½**: æœªå®Ÿè£…
  * **FN011ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‰Šé™¤æ©Ÿèƒ½**: æœªå®Ÿè£…
  * **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ç”»åƒã‚’æ·»ä»˜**: ä¿®æ­£é–“ã«åˆã‚ãš
  * **FN009	å…¥åŠ›æƒ…å ±ä¿æŒæ©Ÿèƒ½**:	æœªå®Ÿè£…
  * **å–å¼•å¾Œã®è©•ä¾¡**: æƒ³å®šã•ã‚Œã‚‹ä»•æ§˜ã¨ä¸€éƒ¨ç•°ãªã£ã¦ã„ã¾ã™ã€‚
  * **å‡ºå“ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å–å¼•å®Œäº†ã‚’ãƒ¡ãƒ¼ãƒ«ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã‚‹**: æœªå®Ÿè£…


-----

## ğŸ“‹ å†æå‡ºå¯¾å¿œå†…å®¹

### ğŸ”§ ä¸»è¦ãªä¿®æ­£ãƒ»æ”¹å–„ç‚¹

#### 1\. Stripeæ±ºæ¸ˆæ©Ÿèƒ½ã®å®Œå…¨å®Ÿè£…

  * **ã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆ**: Stripe Checkoutã®æ±ºæ¸ˆç”»é¢ã«æ­£ã—ãé·ç§»ã™ã‚‹ã‚ˆã†ä¿®æ­£
  * **ã‚³ãƒ³ãƒ“ãƒ‹æ±ºæ¸ˆ**: PaymentIntentã‚’ä½¿ç”¨ã—ãŸã‚³ãƒ³ãƒ“ãƒ‹æ±ºæ¸ˆã‚’å®Ÿè£…
  * **è¦ä»¶å¯¾å¿œ**: FN023ã€ŒStripeã®æ±ºæ¸ˆç”»é¢ã«æ¥ç¶šã•ã‚Œã‚‹ã€ã‚’å®Œå…¨å®Ÿè£…
  * æ±ºæ¸ˆå®Œäº†å¾Œã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç™»éŒ²ã¨å•†å“ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ã‚’å®Ÿè£…

#### 2\. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®çµ±ä¸€

  * ä¼šå“¡ç™»éŒ²ãƒ»ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¦ä»¶é€šã‚Šã«ä¿®æ­£
  * ä½æ‰€å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å½¢å¼ã‚’çµ±ä¸€ï¼ˆéƒµä¾¿ç•ªå·å½¢å¼ç­‰ï¼‰
  * ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹é‡è¤‡ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ 
  * å•†å“å‡ºå“æ™‚ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¼ã‚’ä¿®æ­£

#### 3\. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼æ”¹å–„

  * ä¼šå“¡ç™»éŒ²å¾Œã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šç”»é¢é·ç§»ã‚’å®Ÿè£…ï¼ˆFN006å¯¾å¿œï¼‰
  * ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ™‚ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ç„¡åŠ¹åŒ–å‡¦ç†ã‚’å¼·åŒ–
  * è³¼å…¥å®Œäº†å¾Œã®é©åˆ‡ãªç”»é¢é·ç§»ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

#### 4\. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã®æ”¹å–„

  * `purchases`ãƒ†ãƒ¼ãƒ–ãƒ«ã«`stripe_payment_id`ã‚«ãƒ©ãƒ ã‚’è¿½åŠ 
  * å•†å“çŠ¶æ…‹ã®å‹çµ±ä¸€ï¼ˆæ•°å€¤å®šæ•°ã«çµ±ä¸€ï¼‰
  * Purchase.phpãƒ¢ãƒ‡ãƒ«ã®fillableå±æ€§ã¨ã‚­ãƒ£ã‚¹ãƒˆè¨­å®šã‚’ä¿®æ­£

#### 5\. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®æ”¹å–„

  * Stripeæ±ºæ¸ˆã«å¯¾å¿œã—ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã«ä¿®æ­£
  * å®Ÿéš›ã®APIé€šä¿¡ã‚’é¿ã‘ã‚‹ãƒ¢ãƒƒã‚¯å‡¦ç†ã‚’å®Ÿè£…
  * å…¨79ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒæ­£å¸¸ã«é€šéã™ã‚‹ã“ã¨ã‚’ç¢ºèª

-----

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ERå›³

```mermaid
erDiagram
    users ||--o{ items : "å‡ºå“"
    users ||--o{ purchases : "è³¼å…¥"
    users ||--o{ comments : "ã‚³ãƒ¡ãƒ³ãƒˆ"
    users ||--o{ favorites : "ãŠæ°—ã«å…¥ã‚Š"
    users ||--o{ transactions : "å–å¼•ã«é–¢ä¸"
    users ||--o{ transaction_messages : "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŠ•ç¨¿"
    users ||--o{ user_ratings : "è©•ä¾¡è€…/è¢«è©•ä¾¡è€…"
    
    items ||--o{ purchases : "è³¼å…¥ã•ã‚Œã‚‹"
    items ||--o{ comments : "ã‚³ãƒ¡ãƒ³ãƒˆã•ã‚Œã‚‹"
    items ||--o{ favorites : "ãŠæ°—ã«å…¥ã‚Šã•ã‚Œã‚‹"
    items ||--o{ category_item : "å±ã™ã‚‹"
    items ||--o{ transactions : "å–å¼•å¯¾è±¡"
    
    categories ||--o{ category_item : "å«ã‚€"

    transactions ||--o{ transaction_messages : "å«ã‚€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"
    transactions ||--o{ user_ratings : "è©•ä¾¡å¯¾è±¡"

    users {
        bigint id PK
        varchar name
        varchar email
        timestamp email_verified_at
        varchar password
        varchar avatar
        varchar postal_code
        varchar address
        varchar building_name
        varchar remember_token
        timestamp created_at
        timestamp updated_at
    }

    items {
        bigint id PK
        varchar name
        text description
        varchar brand
        integer price
        varchar image_url
        varchar condition
        bigint seller_id FK
        varchar status
        timestamp created_at
        timestamp updated_at
    }

    purchases {
        bigint id PK
        bigint user_id FK
        bigint item_id FK
        integer quantity
        integer price
        varchar payment_method
        varchar stripe_payment_id
        varchar shipping_postal_code
        text shipping_address
        varchar shipping_building_name
        varchar status
        timestamp purchased_at
        timestamp created_at
        timestamp updated_at
    }

    categories {
        bigint id PK
        varchar name
        timestamp created_at
        timestamp updated_at
    }

    category_item {
        bigint id PK
        bigint category_id FK
        bigint item_id FK
        timestamp created_at
        timestamp updated_at
    }

    favorites {
        bigint id PK
        bigint user_id FK
        bigint item_id FK
        timestamp created_at
        timestamp updated_at
    }

    comments {
        bigint id PK
        bigint user_id FK
        bigint item_id FK
        text content
        timestamp created_at
        timestamp updated_at
    }

    transactions {
        bigint id PK
        bigint item_id FK
        bigint seller_id FK
        bigint buyer_id FK
        varchar status
        timestamp created_at
        timestamp updated_at
    }

    transaction_messages {
        bigint id PK
        bigint transaction_id FK
        bigint user_id FK
        text message
        varchar image_path
        boolean is_read
        timestamp created_at
        timestamp updated_at
    }

    user_ratings {
        bigint id PK
        bigint transaction_id FK
        bigint rater_id FK
        bigint rated_user_id FK
        integer rating
        text comment
        timestamp created_at
        timestamp updated_at
    }
```

### ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§

#### users ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å            | å‹          | èª¬æ˜               |
| :------------------ | :---------- | :----------------- |
| id                  | bigint      | ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆä¸»ã‚­ãƒ¼ï¼‰ |
| name                | varchar(255)| ãƒ¦ãƒ¼ã‚¶ãƒ¼å         |
| email               | varchar(255)| ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆãƒ¦ãƒ‹ãƒ¼ã‚¯ï¼‰ |
| email\_verified\_at   | timestamp   | ãƒ¡ãƒ¼ãƒ«èªè¨¼æ—¥æ™‚     |
| password            | varchar(255)| ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰ |
| avatar              | varchar(255)| ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒãƒ‘ã‚¹ |
| postal\_code         | varchar(255)| éƒµä¾¿ç•ªå·           |
| address             | varchar(255)| ä½æ‰€               |
| building\_name       | varchar(255)| å»ºç‰©å             |
| remember\_token      | varchar(100)| ãƒ­ã‚°ã‚¤ãƒ³ä¿æŒãƒˆãƒ¼ã‚¯ãƒ³ |
| created\_at          | timestamp   | ä½œæˆæ—¥æ™‚           |
| updated\_at          | timestamp   | æ›´æ–°æ—¥æ™‚           |

#### items ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å    | å‹          | èª¬æ˜               |
| :---------- | :---------- | :----------------- |
| id          | bigint      | å•†å“IDï¼ˆä¸»ã‚­ãƒ¼ï¼‰   |
| name        | varchar(255)| å•†å“å             |
| description | text        | å•†å“èª¬æ˜           |
| brand       | varchar(255)| ãƒ–ãƒ©ãƒ³ãƒ‰å         |
| price       | integer     | ä¾¡æ ¼               |
| image\_url   | varchar(255)| å•†å“ç”»åƒURL        |
| condition   | varchar(255)| å•†å“çŠ¶æ…‹           |
| seller\_id   | bigint      | å‡ºå“è€…IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| status      | varchar(255)| å•†å“çŠ¶æ…‹ï¼ˆavailable/soldï¼‰ |
| created\_at  | timestamp   | ä½œæˆæ—¥æ™‚           |
| updated\_at  | timestamp   | æ›´æ–°æ—¥æ™‚           |

#### purchases ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å             | å‹          | èª¬æ˜                   |
| :------------------- | :---------- | :--------------------- |
| id                   | bigint      | è³¼å…¥IDï¼ˆä¸»ã‚­ãƒ¼ï¼‰       |
| user\_id              | bigint      | è³¼å…¥è€…IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰   |
| item\_id              | bigint      | å•†å“IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰     |
| quantity             | integer     | è³¼å…¥æ•°é‡               |
| price                | integer     | è³¼å…¥ä¾¡æ ¼               |
| payment\_method       | varchar(255)| æ”¯æ‰•ã„æ–¹æ³•             |
| stripe\_payment\_id    | varchar(255)| Stripeæ±ºæ¸ˆID           |
| shipping\_postal\_code | varchar(255)| é…é€å…ˆéƒµä¾¿ç•ªå·         |
| shipping\_address     | text        | é…é€å…ˆä½æ‰€             |
| shipping\_building\_name| varchar(255)| é…é€å…ˆå»ºç‰©å           |
| status               | varchar(255)| è³¼å…¥ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹         |
| purchased\_at         | timestamp   | è³¼å…¥æ—¥æ™‚               |
| created\_at           | timestamp   | ä½œæˆæ—¥æ™‚               |
| updated\_at           | timestamp   | æ›´æ–°æ—¥æ™‚               |

#### categories ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å   | å‹          | èª¬æ˜               |
| :--------- | :---------- | :----------------- |
| id         | bigint      | ã‚«ãƒ†ã‚´ãƒªIDï¼ˆä¸»ã‚­ãƒ¼ï¼‰ |
| name       | varchar(255)| ã‚«ãƒ†ã‚´ãƒªå         |
| created\_at | timestamp   | ä½œæˆæ—¥æ™‚           |
| updated\_at | timestamp   | æ›´æ–°æ—¥æ™‚           |

#### category\_item ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰

| ã‚«ãƒ©ãƒ å    | å‹     | èª¬æ˜               |
| :---------- | :----- | :----------------- |
| id          | bigint | IDï¼ˆä¸»ã‚­ãƒ¼ï¼‰       |
| category\_id | bigint | ã‚«ãƒ†ã‚´ãƒªIDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| item\_id     | bigint | å•†å“IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| created\_at  | timestamp | ä½œæˆæ—¥æ™‚           |
| updated\_at  | timestamp | æ›´æ–°æ—¥æ™‚           |

#### favorites ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å   | å‹     | èª¬æ˜               |
| :--------- | :----- | :----------------- |
| id         | bigint | IDï¼ˆä¸»ã‚­ãƒ¼ï¼‰       |
| user\_id    | bigint | ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| item\_id    | bigint | å•†å“IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| created\_at | timestamp | ä½œæˆæ—¥æ™‚           |
| updated\_at | timestamp | æ›´æ–°æ—¥æ™‚           |

#### comments ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å   | å‹     | èª¬æ˜               |
| :--------- | :----- | :----------------- |
| id         | bigint | ã‚³ãƒ¡ãƒ³ãƒˆIDï¼ˆä¸»ã‚­ãƒ¼ï¼‰ |
| user\_id    | bigint | ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| item\_id    | bigint | å•†å“IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| content    | text   | ã‚³ãƒ¡ãƒ³ãƒˆå†…å®¹       |
| created\_at | timestamp | ä½œæˆæ—¥æ™‚           |
| updated\_at | timestamp | æ›´æ–°æ—¥æ™‚           |

#### transactions ãƒ†ãƒ¼ãƒ–ãƒ« **(æ›´æ–°)**

| ã‚«ãƒ©ãƒ å   | å‹          | èª¬æ˜               |
| :--------- | :---------- | :----------------- |
| id         | bigint      | å–å¼•IDï¼ˆä¸»ã‚­ãƒ¼ï¼‰   |
| item\_id    | bigint      | å•†å“IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| seller\_id  | bigint      | å‡ºå“è€…IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| buyer\_id   | bigint      | è³¼å…¥è€…IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| status     | varchar(255)| å–å¼•ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆä¾‹: pending, completed, canceledï¼‰ |
| created\_at | timestamp   | ä½œæˆæ—¥æ™‚           |
| updated\_at | timestamp   | æ›´æ–°æ—¥æ™‚           |

#### transaction\_messages ãƒ†ãƒ¼ãƒ–ãƒ« **(æ–°è¦)**

| ã‚«ãƒ©ãƒ å       | å‹          | èª¬æ˜                   |
| :------------- | :---------- | :--------------------- |
| id             | bigint      | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDï¼ˆä¸»ã‚­ãƒ¼ï¼‰ |
| transaction\_id | bigint      | é–¢é€£ã™ã‚‹å–å¼•IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| user\_id        | bigint      | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| message        | text        | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æœ¬æ–‡         |
| image\_path     | varchar(255)| æ·»ä»˜ç”»åƒã®ãƒ‘ã‚¹ï¼ˆä»»æ„ï¼‰ |
| is\_read        | boolean     | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ—¢èª­çŠ¶æ…‹ï¼ˆtrue: æ—¢èª­, false: æœªèª­ï¼‰ |
| created\_at     | timestamp   | ä½œæˆæ—¥æ™‚               |
| updated\_at     | timestamp   | æ›´æ–°æ—¥æ™‚               |

#### user\_ratings ãƒ†ãƒ¼ãƒ–ãƒ« **(æ–°è¦)**

| ã‚«ãƒ©ãƒ å       | å‹        | èª¬æ˜               |
| :------------- | :-------- | :----------------- |
| id             | bigint    | è©•ä¾¡IDï¼ˆä¸»ã‚­ãƒ¼ï¼‰   |
| transaction\_id | bigint    | é–¢é€£ã™ã‚‹å–å¼•IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| rater\_id       | bigint    | è©•ä¾¡ã‚’ä»˜ã‘ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| rated\_user\_id  | bigint    | è©•ä¾¡ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆå¤–éƒ¨ã‚­ãƒ¼ï¼‰ |
| rating         | integer   | è©•ä¾¡ç‚¹ï¼ˆ1ã€œ5ï¼‰     |
| comment        | text      | è©•ä¾¡ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆä»»æ„ï¼‰ |
| created\_at     | timestamp | ä½œæˆæ—¥æ™‚           |
| updated\_at     | timestamp | æ›´æ–°æ—¥æ™‚           |

-----

## ç’°å¢ƒæ§‹ç¯‰

Dockerãƒ“ãƒ«ãƒ‰\</br\>

1.  `git clone ãƒªãƒ³ã‚¯`
2.  `docker-compose up -d --build`\</br\>
    MySQLã¯ã€OSã«ã‚ˆã£ã¦èµ·å‹•ã—ãªã„å ´åˆãŒã‚ã‚‹ã®ã§ãã‚Œãã‚Œã®PCã«åˆã‚ã›ã¦docker-compose.ymlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚\</br\>

## Laravelé–‹ç™ºç’°å¢ƒ

1.  `docker-compose exec php bash`
2.  `composer install`
3.  `.env.example`ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰`.env`ã‚’ä½œæˆã—ã€ç’°å¢ƒå¤‰æ•°ã‚’å¤‰æ›´
4.  `php artisan key:generate`
5.  `php artisan migrate`
6.  `php artisan db:seed`

### ğŸ”‘ Stripeè¨­å®šï¼ˆé‡è¦ï¼‰

.envãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã®Stripeè¨­å®šã‚’è¿½åŠ ã—ã¦ãã ã•ã„ï¼š

```
# Stripeè¨­å®š
STRIPE_PUBLIC_KEY="pk_test_xxxxxx"
STRIPE_SECRET_KEY="sk_test_xxxxxx"
```

### âœ‰ï¸ ãƒ¡ãƒ¼ãƒ«é€šçŸ¥è¨­å®šï¼ˆMailhog/Mailtrapï¼‰

å‡ºå“è€…ã¸ã®ãƒ¡ãƒ¼ãƒ«é€šçŸ¥æ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã€Mailhogã¾ãŸã¯Mailtrapã®è¨­å®šãŒå¿…è¦ã§ã™ã€‚
.envãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã‚’è¿½åŠ ã¾ãŸã¯å¤‰æ›´ã—ã¦ãã ã•ã„ï¼š

```
MAIL_MAILER=smtp
MAIL_HOST=mailhog # ã¾ãŸã¯ mailtrap.io ãªã©
MAIL_PORT=1025
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS="${MAIL_FROM_ADDRESS}"
MAIL_FROM_NAME="${APP_NAME}"
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
docker-compose exec php php artisan test

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
docker-compose exec php php artisan test tests/Feature/PurchaseTest.php
```

## ğŸ§‘â€ğŸ’» ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼

é–‹ç™ºãŠã‚ˆã³ãƒ†ã‚¹ãƒˆã®ãŸã‚ã«ã€ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚

  * **å‡ºå“è€…1**:
      * ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: `seller1@example.com`
      * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: `password123`
      * å‡ºå“å•†å“: CO01-CO05ã®å•†å“
  * **å‡ºå“è€…2**:
      * ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: `seller2@example.com`
      * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: `password123`
      * å‡ºå“å•†å“: CO06-CO10ã®å•†å“
  * **è³¼å…¥è€…**:
      * ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: `buyer@example.com`
      * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: `password123`
      * å‚™è€ƒ: å•†å“ã¯å‡ºå“ã—ã¾ã›ã‚“

-----


## ä½¿ç”¨æŠ€è¡“

  * PHP 8.4.4
  * Laravel 8.83.8
  * MySQL 8.02.6
  * **Stripe API** (æ±ºæ¸ˆå‡¦ç†)
  * **Mermaid** (ERå›³ç”Ÿæˆ)

## ğŸŒŸ ä¸»è¦æ©Ÿèƒ½

  * ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼ˆä¼šå“¡ç™»éŒ²ãƒ»ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆï¼‰
  * å•†å“ä¸€è¦§ãƒ»è©³ç´°è¡¨ç¤º
  * å•†å“æ¤œç´¢æ©Ÿèƒ½
  * å•†å“å‡ºå“æ©Ÿèƒ½
  * ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½
  * ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½
  * **Stripeæ±ºæ¸ˆæ©Ÿèƒ½ï¼ˆã‚«ãƒ¼ãƒ‰ãƒ»ã‚³ãƒ³ãƒ“ãƒ‹ï¼‰**
  * ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç†
  * è³¼å…¥å±¥æ­´ç®¡ç†
  * **å–å¼•ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½**
      * å–å¼•ä¸­ã®å•†å“ã”ã¨ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€å—ä¿¡
      * ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¸ã®ç”»åƒæ·»ä»˜
      * æœªèª­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šçŸ¥ã¨ã‚½ãƒ¼ãƒˆ
      * ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç·¨é›†ãƒ»å‰Šé™¤
  * **ãƒ¦ãƒ¼ã‚¶ãƒ¼è©•ä¾¡æ©Ÿèƒ½**
      * å–å¼•å®Œäº†å¾Œã®ç›¸äº’è©•ä¾¡ï¼ˆ1ã€œ5æ®µéšã¨ã‚³ãƒ¡ãƒ³ãƒˆï¼‰
      * ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã§ã®å¹³å‡è©•ä¾¡è¡¨ç¤º
      * è©•ä¾¡æ¸ˆã¿ã‹ã©ã†ã‹ã®åˆ¤å®š

## URL

é–‹ç™ºç’°å¢ƒ: http://localhost/\</br\>
phpMyAdmin: http://localhost:8080/

## ğŸ“ å‚™è€ƒ

  * æœ¬ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ãƒ†ã‚¹ãƒˆç’°å¢ƒç”¨ã§ã™
  * Stripeæ±ºæ¸ˆã¯ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã—ã¾ã™
  * å®Ÿéš›ã®æ±ºæ¸ˆã¯ç™ºç”Ÿã—ã¾ã›ã‚“
  * å…¨79ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒæ­£å¸¸ã«é€šéã™ã‚‹ã“ã¨ã‚’ç¢ºèªæ¸ˆã¿

-----
